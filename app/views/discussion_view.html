<div class="panel panel-default">
  <div class="panel-body">
    <div class="media dt-discussion-item">
      <div class="media-left media-middle">
        <span class="glyphicon glyphicon-user"></span>
      </div>
      <div class="media-body">
        <div class="row">
          <div class="col-xs-11">
            <h4 class="media-heading">
              {{discussion.label}}
            </h4>
          </div>
          <div class="col-xs-1">
            <living-documents discussion="discussion"></living-documents>
          </div>
          <div class="col-xs-12 dt-date-time">
            By {{discussion.author.label}} on {{discussion.creationTime | date : "MM/dd/yyyy 'at' h:mm a"}}
          </div>
          <div class="col-xs-12" ng-bind-html="discussion.description"></div>
          <div class="col-xs-12">
            <attached-entities entities="discussion.attachedEntities"></attached-entities>
          </div>
          <div class="col-xs-10">
            <span class="badge" ng-if="discussion.tags" ng-repeat="tag in discussion.tags">{{tag.label}}</span>
          </div>
          <div class="col-xs-2">
              <likes model="discussion"></likes>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="row" ng-repeat="entry in discussion.entries">
  <div class="panel panel-default col-xs-offset-2 col-xs-10">
    <div class="panel-body">
      <div class="media dt-discussion-entry">
        <div class="media-left media-middle">
          <span class="glyphicon glyphicon-user"></span>
        </div>
        <div class="media-body">
          <div class="row">
            <div class="col-xs-12 dt-date-time">
              By {{entry.author.label}} on {{entry.creationTime | date : "MM/dd/yyyy 'at' h:mm a"}}
            </div>
            <div class="col-xs-12" ng-bind-html="entry.content"></div>
            <div class="col-xs-12">
              <attached-entities entities="entry.attachedEntities"></attached-entities>
            </div>
            <div class="col-xs-10">
              <span class="badge" ng-if="discussion.tags" ng-repeat="tag in entry.tags">{{tag.label}}</span>
            </div>
            <div class="col-xs-2">
              <likes model="entry" discussion="discussion"></likes>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="panel panel-default">
  <div class="panel-body">
    <form class="dt-create-answer">
      <div class="row">
        <div class="col-xs-8">
          <div class="form-group">
            <text-angular ta-toolbar="[['bold', 'italics', 'underline', 'strikeThrough', 'ul', 'ol', 'undo', 'redo', 'clear'], ['justifyLeft', 'justifyCenter', 'justifyRight', 'indent', 'outdent'], ['html', 'insertImage', 'insertLink', 'insertVideo']]" ng-model="answer.description"></text-angular>
          </div>
          <div class="form-group pull-right">
            <button type="submit" class="btn btn-success btn-lg" ng-click="doSubmit()" ng-disabled="isBeingSubmitted()">Create</button>
          </div>
        </div>
        <div class="col-xs-4">
          <tabset>
            <tab active="true">
              <tab-heading>
                Tags
              </tab-heading>
              <h4>Add tags</h4>
              <tags-and-cloud frequencies="tagFrequencies" autocomplete="tagAutocomplete.promise" tags="answer.tags" min-frequency="minFrequency" max-frequency="maxFrequency"></tags-and-cloud>
            </tab>
            <tab active="false" disable="!isEpisode()">
              <tab-heading>
                Bits and Pieces
              </tab-heading>
              <h4>Add Bits and Pieces</h4>
              <bits-and-pieces version="episodeVersion" orphaned="standaloneEntities" model="answer.entities"></bits-and-pieces>
            </tab>
          </tabset>
        </div>
      </div>
    </form>
  </div>
</div>
