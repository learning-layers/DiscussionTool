<form ng-show="isLoggedIn()" name="create_discussion_form" novalidate ng-submit="doSubmit()" class="dt-create-discussion">
  <h1>New Discussion</h1>
  <div class="row">
    <div class="col-xs-8">
      <div class="form-group">
        <label for="label">Label</label>
        <input type="text" class="form-control" id="label" name="label" placeholder="Label" ng-model="discussion.label" required>
        <div class="error-container" ng-show="create_discussion_form.label.$dirty && create_discussion_form.label.$invalid && create_discussion_form.$submitted">
          <small class="error text-danger"
                 ng-show="create_discussion_form.label.$error.required">
                 Label is required
          </small>
        </div>
      </div>
      <div class="form-group">
        <text-angular ta-toolbar="[['bold', 'italics', 'underline', 'strikeThrough', 'ul', 'ol', 'undo', 'redo', 'clear'], ['justifyLeft', 'justifyCenter', 'justifyRight', 'indent', 'outdent'], ['html', 'insertImage', 'insertLink', 'insertVideo']]" name="description" ng-model="discussion.description" required></text-angular>
        <div class="error-container"
             ng-show="create_discussion_form.description.$dirty && create_discussion_form.description.$invalid && create_discussion_form.$submitted">
          <small class="error text-danger"
                 ng-show="create_discussion_form.description.$error.required">
                 Description is required
          </small>
        </div>
      </div>
      <div class="form-group pull-right">
        <button type="button" class="btn btn-default btn-lg" ng-click="doCancel()" ng-disabled="isBeingSubmitted()">Cancel</button>
        <button type="submit" class="btn btn-success btn-lg" ng-disabled="isBeingSubmitted()">
          <i class="fa fa-spinner fa-spin" ng-if="isBeingSubmitted()"></i>
          Publish
        </button>
      </div>
    </div>
    <div class="col-xs-4">
      <tabset>
        <tab active="true">
          <tab-heading>
            Tags
          </tab-heading>
          <h4>Add tags</h4>
          <tags-and-cloud recommendations="tagResommendations" autocomplete="tagAutocomplete.promise" tags="discussion.tags"></tags-and-cloud>
        </tab>
        <tab active="false" disable="!isEpisode()">
          <tab-heading>
            Bits and Pieces
          </tab-heading>
          <h4>Add Bits and Pieces</h4>
          <bits-and-pieces version="episodeVersion" orphaned="standaloneEntities" model="discussion"></bits-and-pieces>
        </tab>
      </tabset>
    </div>
  </div>
</form>
